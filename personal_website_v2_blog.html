<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Your Name - Academic Website</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            padding: 0;
            background-color: #f4f4f4;
        }
        header {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 10px;
            background-color: #333;
            color: #fff;
        }
        header img {
            border-radius: 0;
            width: 400px;
            height: 400px;
            margin-right: 50px;
        }
        h1, p {
            margin: 0;
        }
        nav {
            margin-top: 20px;
        }
        nav ul {
            list-style-type: none;
            margin: 0;
            padding: 0;
            overflow: hidden;
            background-color: #333;
        }
        nav li {
            float: left;
        }
        nav li a {
            display: block;
            color: white;
            text-align: center;
            padding: 14px 16px;
            text-decoration: none;
        }
        nav li a:hover {
            background-color: #ddd;
            color: black;
        }
        section {
            margin: 20px 0;
        }
        footer {
            text-align: center;
            padding: 10px;
            background-color: #333;
            color: #fff;
            position: fixed;
            bottom: 0;
            width: 100%;
        }
    </style>
</head>
<body>
    <header>
        <img src="Yuzhu_photo_v2.jpg" alt="Yuzhu" style="width:30%; height: auto;">
        <div>
            <h1>Yuzhu Sun</h1>
            <p>MSc Student in Radio Astronomy & Neutral Hydrogen</p>
            <p>University of Science and Technology of China</p>
            <br>
            <p>Email: yzsun0407@gmail.com</p>
            <p>Office: Room 17015, Lihua Building, USTC</p>
        </div>
    </header>
    
   
    <nav>
        <ul>
            <li><a href="index.html" target="_blank">Home</a></li>
            <li><a href="personal_website_v2_about_me.html" target="_blank">About me</a></li>
            <li><a href="personal_website_v2_courses.html" target="_blank">Courses</a></li>
            <li><a href="#blog">Blog</a></li>
        </ul>
    </nav>

    <section id="blog">
        <h2>Blog</h2>
        <p>I will upload some mini-guides (just based on my experience) of software and packages here, as kinds of working notes. <p>
        <h3>PV plotting</h3>
        <p>1. Find the path you want to extract the pv-plot using Carta</p>
        <p>Choose coordinate: image</p>
        <p>You can find the 'start' and the 'end' of the line in pixel</p>
        <p>Start:(202.84,218.65)</p>
        <p>End:(190.81,182,77)</p>
        <br>
        <p>2. Back to python</p>
        <p>from spectral_cube import SpectralCube</p>
        <p>from pvextractor import extract_pv_slice, Path</p>

        <p>cube = SpectralCube.read('/data/yzsun/13A-028/combining/final_cubes_2/make_moments/line_only_AGC226178_BCDD_nat_sub_freq_v2_NHI.fits')</p>
        <p>#from the start to the end</p>
        <p>path = Path([(202.84,218.65),(190.81,182,77)])</p>
        <p>#you can plot the path on one channel, it did work before, but now it encountered: 'Path' object has no attribute 'show_on_axis'. If this can work, you do not even need to find the path in Carta.</p>
        <p>ax = pl.subplot(111, projection=cube.wcs.celestial)</p>
        <p>#choose one channel to show</p>
        <p>ax.imshow(cube[100].value)</p>
        <p>path.show_on_axis(ax, spacing=1, color='r')</p>
        <p>ax.set_xlabel(f"Right Ascension [{cube.wcs.wcs.radesys}]")</p>
        <p>ax.set_ylabel(f"Declination [{cube.wcs.wcs.radesys}]")</p>
        <br>
        <p>3.Extract pv slice</p>
        <p>pvdiagram = extract_pv_slice(cube=sub_cube, path=path, spacing=3)</p>
        <br>
        <p>4. Plotting</p>
        <p>fig = plt.figure(figsize=(12,12))</p>
        <p>ax = pl.subplot(111, projection=wcs.WCS(pvdiagram.header))</p>
        <p>im = ax.imshow(pvdiagram.data)</p>

        <p># adjust the shape of the plot if you are not satisfied with it</p>
        <p>ax.set_aspect(0.5)</p>
        <p>cb = pl.colorbar(mappable=im)</p>

        <p># we could specify the colorbar units like this:</p>
        <p>cb.set_label(cube.unit)</p>
        <p># but the 'BUNIT' keyword is not set for these data, so we don't know the unit.  We instead manually specify:</p>
        <p>#cb.set_label("Brightness Temperature [K]")</p>
        <p>#level = (0.0024,0.0048,0.0072)</p>
        <p>#ax.contour(pvdiagram.data, levels=level, colors=['white'])</p>

        <h3>baygaud-PI installation</h3>
        <p>updated 12 Nov 2023</p>
        <p># create environment</p>
        <p>conda create -n baygaud</p>
        <br>
        <p># activate environment </p>
        <p>source activate baygaud</p>
        <br>
        <p># install python</p>
        <p>conda install python=3.10</p>
        <br>
        <p># download from GitHub</p>
        <p>git clone https://github.com/seheon-oh/baygaud-PI.git</p>
        <br>
        <p># go to the downloaded file</p>
        <p>cd baygaud-PI</p>
        <br>
        <p># installation</p>
        <p>pip install .</p>
        <br>
        <p># using (in the environment)</p>
        <p>python3.10 baygaud.py _baygaud_params.xxxx.yaml</p>
        <br>
        <p>#sth should notice</p>
        <p>#the VELOCITY UNIT of the input data cube MUST be in m/s</p>
        <p>#s/r should be adjusted based on the quantity of the data</p>


        <br>
        <br>
        <br>
        <br>
    </section>



    <footer>
        <p>&copy; 2023 Yuzhu Sun | USTC</p>
    </footer>

    <script>
        function toggleBlog() {
            var blogSection = document.getElementById('blog-section');
            if (blogSection.style.display === 'none' || blogSection.style.display === '') {
                blogSection.style.display = 'block';
            } else {
                blogSection.style.display = 'none';
            }
        }
    </script>
</body>
</html>

 
